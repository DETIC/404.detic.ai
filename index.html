<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>DETIC // SISTEMA EM COLAPSO</title>
  <meta name="robots" content="noarchive">
  <style>
    :root{
      --preto-abissal:#0A0A0A;
      --texto-primario:#E0E0E0;
      --vermelho-panico:#C62828; /* cor pedida para DETIC */
      --verde-sintetico:#00FF00;
      --ciano-espasmodico:#00FFFF;
      --magenta-estilhacado:#FF00FF;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--preto-abissal);
      color:var(--texto-primario);
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      letter-spacing:0.2px;
      background-image:
        radial-gradient(transparent 0 1px),
        radial-gradient(transparent 0 1px);
      background-size: 3px 3px, 5px 5px;
      background-position: 0 0, 1px 1px;
    }

    /* Utilidades */
    .hidden{ display:none !important; }

    /* ===== Camada 1 (splash) ===== */
    .layer1{
      position: fixed; inset: 0;
      display: flex; flex-direction: column; gap: 18px;
      align-items: center; justify-content: center;
      background: var(--preto-abissal);
      z-index: 1000;
      padding: 5vw;
      text-align: center;
    }
    .layer1 .glitch-line{
      font-size: clamp(16px,2.2vw,22px);
      opacity: .95;
      letter-spacing: .5px;
      animation: blink 1.2s steps(2, start) infinite;
    }
    @keyframes blink{
      0%,40%{ opacity:.95 }
      50%   { opacity:.20 }
      90%,100%{ opacity:.95 }
    }

    /* ===== Camada 2 (site) ===== */
    .wrap{
      max-width: 1400px;
      padding: 6rem 5vw 4rem;
    }

    /* Grid: esquerda = site; direita = marca DETIC grande (só em telas largas) */
    .grid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      align-items: start;
      gap: clamp(24px, 5vw, 64px);
    }
    @media (max-width: 900px){
      .grid{ display:block; }
      .brand-col{ display:none; } /* some em telas pequenas */
    }

    .left-col{ /* mantém conteúdo encostado à esquerda */
      transform: translateX(-1.5%) rotate(-0.1deg);
    }

    .row:nth-child(2){transform: translateX(3%) rotate(0.2deg);}
    .row:nth-child(3){transform: translateX(-3%) rotate(-0.15deg);}

    .badge{
      display:inline-block; font-size:12px; letter-spacing:2px; text-transform:uppercase;
      border:1px solid var(--texto-primario); padding:4px 8px; opacity:.7; margin-bottom:16px;
    }

    /* 404 com glitch (conteúdo original) */
    .e404{
      position:relative;
      font-size: clamp(64px, 14vw, 220px);
      font-weight: 900; line-height:.8;
      color: var(--vermelho-panico);
      text-shadow: 0 0 1px rgba(198,40,40,0.6), 0 0 18px rgba(198,40,40,0.25);
      letter-spacing: -6px;
    }
    .e404::before, .e404::after{
      content: attr(data-text);
      position:absolute; left:0; top:0;
      mix-blend-mode: difference; opacity:.65; pointer-events:none;
    }
    .e404::before{ color: var(--ciano-espasmodico); transform: translate(2px, -1px); }
    .e404::after { color: var(--magenta-estilhacado); transform: translate(-2px, 1px); }
    @keyframes jitter {
      0%,100%{ transform: translate(0,0); }
      20%{ transform: translate(-1px,0.5px); }
      40%{ transform: translate(1px,-0.5px); }
      60%{ transform: translate(-0.5px,-1px); }
      80%{ transform: translate(0.5px,1px); }
    }
    .e404, .e404::before, .e404::after{ animation: jitter 1.8s infinite steps(2,end); }

    h1{
      font-size: clamp(22px, 2.8vw, 40px);
      text-transform: uppercase; margin: 18px 0 6px 0; letter-spacing: 1.5px;
    }
    .sub{
      font-size: clamp(14px, 1.4vw, 18px); opacity:.85; text-transform: uppercase; letter-spacing:1px; margin-bottom: 28px;
    }
    .body{ max-width: 68ch; font-size: 15px; line-height: 1.4; margin-top: 18px; }

    .cmd{
      display:inline-flex; align-items:center; gap:12px;
      margin-top:28px; padding:10px 14px;
      border:1px solid var(--verde-sintetico);
      background: rgba(0,0,0,.35);
      text-decoration:none; color: var(--verde-sintetico);
      font-weight:700; letter-spacing:.5px;
      box-shadow: 0 0 12px rgba(0,255,0,0.15);
      transform: translateX(-2%);
      transition: opacity .4s ease, visibility .4s ease;
    }
    .cmd .caret{ width:10px; height:14px; background: var(--verde-sintetico); display:inline-block; }
    .cmd.disabled{
      opacity:0; visibility:hidden; pointer-events:none;
    }
    .cmd.enabled{
      opacity:1; visibility:visible; pointer-events:auto;
    }

    .disclaimer{ margin-top: 40px; font-size: 12px; opacity: .6; max-width: 80ch; }
    a, button{ border-radius:0 }

    /* ===== Marca gigante à direita ===== */
    .brand-col{
      position: relative;
      display:flex; align-items:center; justify-content:center;
      /* altura aproximada disponível: subtrai padding do wrapper */
      min-height: 60vh;
      height: calc(100vh - 10rem);
      overflow: hidden;
    }
    .brand-wrap{
      position: relative;
      display:flex; align-items:center; justify-content:center;
      width:100%; height:100%;
    }
    .brand{
      display:flex; gap: clamp(8px, 1.5vw, 18px);
      line-height: .8;
      user-select:none;
      transform-origin: center center; /* importante para o scale centralizado */
      will-change: transform;
    }
    .brand-letter{
      color: var(--vermelho-panico);
      font-weight: 900;
      /* tamanho base generoso; o JS escalará até 90% do container */
      font-size: 160px;
      letter-spacing: -6px;
      opacity: 0;
      transform: translateY(12px) scale(0.98);
      filter: drop-shadow(0 0 12px rgba(198,40,40,0.15));
      transition: opacity .4s ease, transform .6s cubic-bezier(.2,.7,.2,1);
    }
    .brand-letter.on{
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  </style>
</head>
<body>

  <!-- Camada 1: overlay inicial (frase piscando) -->
  <section id="layer1" class="layer1">
    <p class="glitch-line" id="frase">&gt; você nunca esteve online. só em rede.</p>
  </section>

  <!-- Camada 2: conteúdo -->
  <main id="layer2" class="wrap hidden">
    <div class="grid">
      <!-- Coluna esquerda: conteúdo existente -->
      <section class="left-col">
        <div class="row"><span class="badge">interface de falha deliberada</span></div>

        <div class="row">
          <div class="e404" aria-hidden="true" data-text="404">404</div>
        </div>

        <div class="row">
          <h1>Sistema em colapso</h1>
          <div class="sub">navegação interrompida</div>
          <div class="body">
            este é o corpo da falha. a detic não opera em redes convencionais. a interface é uma disfunção deliberada.
            você está no lugar certo, ou talvez não.
          </div>

          <a class="cmd disabled" href="/" id="executar">
            <span class="caret" aria-hidden="true"></span>/executar_protocolo.sh
          </a>

          <p class="disclaimer">
            we are the robots.
          </p>
        </div>
      </section>

      <!-- Coluna direita: marca DETIC gigante (ocupa ~90% do espaço livre) -->
      <aside class="brand-col" aria-hidden="true">
        <div class="brand-wrap" id="brandWrap">
          <div class="brand" id="brand">
            <span class="brand-letter" data-i="0">D</span>
            <span class="brand-letter" data-i="1">E</span>
            <span class="brand-letter" data-i="2">T</span>
            <span class="brand-letter" data-i="3">I</span>
            <span class="brand-letter" data-i="4">C</span>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <script>
    // Splash (camada 1) -> Site (camada 2) após ~3s
    (function(){
      const $l1 = document.getElementById('layer1');
      const $l2 = document.getElementById('layer2');
      const TRANSICAO_MS = 3000; // duração do splash
      setTimeout(()=>{
        $l1.classList.add('hidden');
        $l2.classList.remove('hidden');
        startBrandSequence(); // dispara a sequência ao entrar na 2ª camada
      }, TRANSICAO_MS);
    })();

    // Ajusta escala da marca para ocupar ~90% do espaço livre (largura e altura)
    function resizeBrand(){
      const wrap = document.getElementById('brandWrap');
      const brand = document.getElementById('brand');
      if(!wrap || !brand) return;

      // Reset para medir tamanho "natural"
      brand.style.transform = 'scale(1)';

      const w = wrap.clientWidth;
      const h = wrap.clientHeight;
      const bb = brand.getBoundingClientRect();
      const bw = bb.width;
      const bh = bb.height;

      if (bw === 0 || bh === 0 || w === 0 || h === 0) return;

      // 90% de ocupação em ambos os eixos
      const scale = Math.min((w * 0.90) / bw, (h * 0.90) / bh);

      brand.style.transform = `scale(${scale})`;
    }

    // Sequência: aguarda 2s, mostra D,E,T,I,C a cada 1s, então revela o botão
    function startBrandSequence(){
      const letters = document.querySelectorAll('.brand-letter');
      const btn = document.getElementById('executar');
      const WAIT_BEFORE = 2000; // 2s antes de iniciar a revelação
      const STEP = 1000;        // 1s por letra

      // estado inicial do botão
      if(btn){
        btn.classList.remove('enabled');
        btn.classList.add('disabled');
        btn.setAttribute('aria-disabled','true');
      }

      // Primeiro ajuste de escala (com letras ainda "apagadas")
      resizeBrand();

      // revela letras em sequência; recalcula escala a cada letra
      letters.forEach((el, idx) => {
        setTimeout(()=>{
          el.classList.add('on');
          resizeBrand();
        }, WAIT_BEFORE + idx*STEP);
      });

      // quando terminar (após C), habilita/aparece o botão
      const total = WAIT_BEFORE + letters.length * STEP;
      setTimeout(()=>{
        if(btn){
          btn.classList.remove('disabled');
          btn.classList.add('enabled');
          btn.removeAttribute('aria-disabled');
        }
        resizeBrand(); // ajuste final
      }, total);

      // Recalcular em resize/rotação
      window.addEventListener('resize', resizeBrand);
      // Pequeno debounce para fontes que ajustam depois do paint
      setTimeout(resizeBrand, 100);
      setTimeout(resizeBrand, 300);
    }

    // Comportamento original do "executar_protocolo.sh"
    (function(){
      const $exec = document.getElementById('executar');
      if(!$exec) return;
      $exec.addEventListener('click', function(){
        setTimeout(function(){
          if (document.visibilityState === 'visible') {
            alert('protocolo executado localmente. defina a rota "/" quando a home existir.');
          }
        }, 600);
      });
    })();
  </script>
</body>
</html>
